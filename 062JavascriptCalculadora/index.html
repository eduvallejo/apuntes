<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>calculadora</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/comenzarNumero.js"></script>
<script src="js/calcular.js"></script>
<script src="js/resetear.js"></script>

<script>
    var numero = [];
    var contador = 0;
    var resultado = 0;
	//para q no de NAN al concatenar
    numero[contador]="";

    var numeroNuevo = false;

    function mostrar (argument) {
		document.getElementById('salida').innerHTML = "";
		for (var i = 0; i < numero.length; i++) {
			document.getElementById('salida').innerHTML +=numero[i];
		}; 
    }

    function pillarTecla (tecla) {
    	
    	//comprobar si emepzamos de nuevo
    	if (numeroNuevo == true) {
    		numeroNuevo = false;
			document.getElementById('salida').innerHTML = "";
			for (var i = 0; i < numero.length; i++) {
				numero[i] = "";
			};
			contador = 0;
    	}
    	//leer teclas
		switch (tecla) {
    		
    		case "C":
    			console.log("c!");
    			resetear();
    			break;
    		case "CE":
    			console.log("c!");
    			numero[contador] =  "";
    			mostrar();
    			break;
    		case "Retroc":
    			console.log("c!");
    			// numero[contador] = numero[contador].substring(0, numero[contador].length - 1);
    			numero[contador] = numero[contador].slice(0, -1);
    			mostrar();
    			break;
    		case "+/-":
    			console.log("+/-");
    			numero[contador] = (-numero[contador]);
    			mostrar();
    			break;
    		default:
    			// statements_def
		    	numero[contador] += tecla;
		    	console.log("contador: " + contador);
			    document.getElementById('salida').innerHTML += tecla;
    			break;
    	}

    	
	}

	function calcularPorciento () {
		console.log("numero1: " + numero[1]);
				var resultado = (parseFloat(numero[2])*parseFloat(numero[0])/100);
				console.log()	
	    	 	document.getElementById('salida').innerHTML = resultado;
	}

	function operar (argument) {
		contador++;
		numero[contador] = argument;
		console.log("numero["+contador+"] = " + numero[contador]);

		contador++;
		//para q no de NAN al concatenar
		numero[contador]="";
		mostrar();
	}

	function calcularRaiz (argument) {
		var resultado = Math.sqrt(parseInt(numero[0]));
		console.log(numero[0]);
		// document.getElementById('salida').innerHTML = resultado;
	 	document.getElementById('salida').innerHTML = resultado;
	}

	function calcularInversa (argument) {
		var resultado = 1/(parseFloat(numero[0]));
		console.log(numero[0]);
		// document.getElementById('salida').innerHTML = resultado;
	 	document.getElementById('salida').innerHTML = resultado;
	}
</script>
</head>

<body>
<form class="contorno">
	<p id="salida"></p>
	<div class="rojas">
		<input type="button" value="Retroc" onclick="pillarTecla('Retroc')">
		<input type="button" value="CE" onclick="pillarTecla('CE')">
		<input type="button" value="C" onclick="pillarTecla('C')">
	</div>
	<input type="button" value="7" onclick="pillarTecla('7')">
	<input type="button" value="8" onclick="pillarTecla('8')">
	<input type="button" value="9" onclick="pillarTecla('9')">
	<input type="button" value="/" onclick="operar('/')">
	<input type="button" value="Raiz" onclick="calcularRaiz('Raiz')">
	<input type="button" value="4" onclick="pillarTecla('4')">
	<input type="button" value="5" onclick="pillarTecla('5')">
	<input type="button" value="6" onclick="pillarTecla('6')">
	<input type="button" value="*" onclick="operar('*')">
	<input type="button" value="%" onclick="calcularPorciento('%')">
	<input type="button" value="1" onclick="pillarTecla('1')">
	<input type="button" value="2" onclick="pillarTecla('2')">
	<input type="button" value="3" onclick="pillarTecla('3')">
	<input type="button" value="-" onclick="operar('-')">
	<input type="button" value="1/x" onclick="calcularInversa('1/x')">
	<input type="button" value="0" onclick="pillarTecla('0')">
	<input type="button" value="+/-" onclick="pillarTecla('+/-')">
	<input type="button" value="." onclick="pillarTecla('.')">
	<input type="button" value="+" onclick="operar('+')">
	<input type="button" value="=" onclick="calcular('=')">
</form>
</body>
</html>